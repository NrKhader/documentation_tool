{% extends "base.html" %}
{% block title %}Edit {{ title }} - Documentation Tool{% endblock %}
{% block content %}
<div class="page-flex">
    <aside class="sidebar">
        <h4 class="sidebar-title">{{ current_section|capitalize }}</h4>
        <ul class="sidebar-list">
            {% for doc in section_docs %}
                <li {% if doc.filename == current_doc %}class="active"{% endif %}>
                    <a href="{{ url_for('page', doc_path=doc.path) }}">{{ doc.filename }}</a>
                </li>
            {% endfor %}
        </ul>
        <div class="sidebar-actions">
            <a href="{{ url_for('new_document') }}" class="edit-btn" style="margin-top:1em;">+ New Document</a>
        </div>
    </aside>
    <div class="page-main-container container">
        <main>
            <form method="post" id="doc-form" autocomplete="off">
                <header class="editor-header">
                    <input type="text" id="title" name="title" class="editor-title" value="{{ title if title else '' }}" required>
                    <div class="editor-actions">
                        <button type="submit" class="save-btn">Save</button>
                    </div>
                </header>
                <label for="section">Section/Folder:</label>
                <input type="text" id="section" name="section" value="{{ current_section if current_section else '' }}" placeholder="e.g. guides, tutorials, reference" style="font-size:0.98em; padding:0.3em 0.5em; margin-bottom:0.7em;">
                <div class="editor-toolbar">
                    <button type="button" class="toolbar-btn" data-command="bold" title="Bold"><b>B</b></button>
                    <button type="button" class="toolbar-btn" data-command="italic" title="Italic"><i>I</i></button>
                    <button type="button" class="toolbar-btn" data-command="h2" title="Heading 2">H2</button>
                    <button type="button" class="toolbar-btn" data-command="code" title="Code Block">{"</>"}</button>
                    <button type="button" class="toolbar-btn" data-command="insertUnorderedList" title="Bullet List">â€¢ List</button>
                    <button type="button" class="toolbar-btn" data-command="insertOrderedList" title="Numbered List">1. List</button>
                    <button type="button" class="toolbar-btn" data-command="createLink" title="Insert Link">ğŸ”—</button>
                    <button type="button" class="toolbar-btn" data-command="insertImage" title="Insert Image">ğŸ–¼ï¸</button>
                    <button type="button" class="toolbar-btn" data-command="formatBlock" data-value="blockquote" title="Blockquote">â</button>
                    <button type="button" class="toolbar-btn" data-command="insertHorizontalRule" title="Horizontal Rule">â€•</button>
                    <button type="button" class="toolbar-btn" data-command="undo" title="Undo">âŒ</button>
                    <button type="button" class="toolbar-btn" data-command="redo" title="Redo">âŒâŒ</button>
                </div>
                <label for="tags" style="font-size:0.98em;">Tags:</label>
                <input type="text" id="tags" name="tags" value="{{ tags|default('') }}" placeholder="#python, #flask, #api" style="font-size:0.98em; padding:0.3em 0.5em; margin-bottom:0.7em; width:60%;">
                <label for="content" style="font-size:0.98em;">Content:</label>
                <div id="writing-space" class="writing-space" contenteditable="true" spellcheck="true" aria-label="Document content" style="font-size:1em; min-height:220px;">{{ content|safe }}</div>
                <textarea id="content" name="content" style="display:none;" required>{{ content|safe }}</textarea>
                <div class="editor-footer">
                    <span id="word-count" style="font-size:0.95em;">0 words</span>
                </div>
            </form>
        </main>
    </div>
    <aside class="markdown-help notebook-cheatsheet">
        <h2>ğŸ“’ Formatting Cheatsheet</h2>
        <ul>
            <li><span class="cheat-label">Bold</span> <code>&lt;b&gt;bold text&lt;/b&gt;</code></li>
            <li><span class="cheat-label">Italic</span> <code>&lt;i&gt;italic text&lt;/i&gt;</code></li>
            <li><span class="cheat-label">Heading 2</span> <code>&lt;h2&gt;Heading&lt;/h2&gt;</code></li>
            <li><span class="cheat-label">Code Block</span> <code>&lt;pre&gt;&lt;code&gt;...&lt;/code&gt;&lt;/pre&gt;</code></li>
            <li><span class="cheat-label">List</span> <code>&lt;ul&gt;&lt;li&gt;Item&lt;/li&gt;&lt;/ul&gt;</code></li>
            <li><span class="cheat-label">Numbered List</span> <code>&lt;ol&gt;&lt;li&gt;Item&lt;/li&gt;&lt;/ol&gt;</code></li>
            <li><span class="cheat-label">Link</span> <code>&lt;a href="url"&gt;link&lt;/a&gt;</code></li>
            <li><span class="cheat-label">Image</span> <code>&lt;img src="image.jpg" alt="desc"&gt;</code></li>
            <li><span class="cheat-label">Blockquote</span> <code>&lt;blockquote&gt;quote&lt;/blockquote&gt;</code></li>
            <li><span class="cheat-label">Horizontal Rule</span> <code>&lt;hr&gt;</code></li>
        </ul>
    </aside>
</div>
{% endblock %}
